import{h as T,a7 as U,I as q,aH as G,a8 as K,s as O,u as Q,z as r,aI as R,r as p,B as W,aa as X,ab as Y,ac as Z,b as a,ad as ee,E as y,F as V,aJ as le,ah as te,ai as ae,aj as ne,H as ue}from"./index.d87cfa0f.js";const ie=T({name:"VFileInput",inheritAttrs:!1,props:{chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},multiple:Boolean,hint:String,persistentHint:Boolean,placeholder:String,showSize:{type:[Boolean,Number],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(e)},...U(),prependIcon:{type:q,default:"$file"},modelValue:{type:Array,default:()=>[],validator:e=>G(e).every(f=>f!=null&&typeof f=="object")},...K({clearable:!0})},emits:{"click:clear":e=>!0,"click:control":e=>!0,"update:modelValue":e=>!0},setup(e,f){let{attrs:w,emit:S,slots:n}=f;const{t:I}=O(),u=Q(e,"modelValue"),k=r(()=>typeof e.showSize!="boolean"?e.showSize:void 0),C=r(()=>{var l;return((l=u.value)!=null?l:[]).reduce((t,o)=>{let{size:d=0}=o;return t+d},0)}),F=r(()=>R(C.value,k.value)),g=r(()=>{var l;return((l=u.value)!=null?l:[]).map(t=>{const{name:o="",size:d=0}=t;return e.showSize?`${o} (${R(d,k.value)})`:o})}),_=r(()=>{var l,t;const o=(l=(t=u.value)==null?void 0:t.length)!=null?l:0;return e.showSize?I(e.counterSizeString,o,F.value):I(e.counterString,o)}),b=p(),z=p(),c=p(!1),s=p(),A=r(()=>e.messages.length?e.messages:e.persistentHint?e.hint:"");function h(){if(s.value!==document.activeElement){var l;(l=s.value)==null||l.focus()}c.value||(c.value=!0)}function $(l){var t;(t=s.value)==null||t.click(),S("click:control",l)}function H(l){l.stopPropagation(),h(),ue(()=>{u.value=[],s!=null&&s.value&&(s.value.value=""),S("click:clear",l)})}return W(()=>{const l=!!(n.counter||e.counter),t=!!(l||n.details),[o,d]=X(w),[{modelValue:oe,...N}]=Y(e),[j]=Z(e);return a(ae,y({ref:b,modelValue:u.value,"onUpdate:modelValue":v=>u.value=v,class:"v-file-input"},o,N,{"onClick:prepend":$,messages:A.value}),{...n,default:v=>{let{isDisabled:m,isDirty:B,isReadonly:D,isValid:x}=v;return a(ee,y({ref:z,"prepend-icon":e.prependIcon,"onClick:control":$,"onClick:clear":H},j,{active:B.value||c.value,dirty:B.value,focused:c.value,error:x.value===!1}),{...n,default:E=>{let{props:{class:J,...L}}=E;return a(V,null,[a("input",y({ref:s,type:"file",readonly:D.value,disabled:m.value,multiple:e.multiple,name:e.name,onClick:i=>{i.stopPropagation(),h()},onChange:i=>{var P;if(!i.target)return;const M=i.target;u.value=[...(P=M.files)!=null?P:[]]},onFocus:h,onBlur:()=>c.value=!1},L,d),null),u.value.length>0&&a("div",{class:J},[n.selection?n.selection({fileNames:g.value,totalBytes:C.value,totalBytesReadable:F.value}):e.chips?g.value.map(i=>a(le,{key:i,size:"small",color:e.color},{default:()=>[i]})):g.value.join(", ")])])}})},details:t?v=>{var m;return a(V,null,[(m=n.details)==null?void 0:m.call(n,v),l&&a(V,null,[a("span",null,null),a(te,{active:!!u.value.length,value:_.value},n.counter)])])}:void 0})}),ne({},b,z,s)}});export{ie as V};

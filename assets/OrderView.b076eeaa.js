import{o as N,A as S,M as T,r as b,N as k,C as D,a as r,c as u,b as l,t as s,d as e,w as a,V as p,e as $,F as v,O as w,P as f,a1 as A,a7 as F,S as q,f as o,aB as M,Q as V,H as x,a2 as O,a5 as P,at as U,a6 as E,av as I,U as L}from"./index.c80d3659.js";const R={id:"front_order_view"},H={class:"MyContainer"},Q={class:"text-h2 text-center mt-15 text-brown font-weight-bold","data-aos":"fade-down","data-aos-duration":"1000","data-aos-offset":"150"},j={class:"order_panel"},z=["onClick"],G=["onClick"],J={class:"d-lg-none"},K={class:"d-lg-none"},W={key:0},X={key:1},Y={key:2},Z={class:"d-lg-none"},ee={class:"d-lg-none"},te={key:1,class:"text-h1 text-center mt-10"},se={class:"text-center mt-4 text-brown"},ae={class:"text-brown"},le={class:"text-brown"},ne={class:"text-brown"},oe={class:"text-brown"},de=["onClick"],ie=["onClick"],re={class:"d-md-none text-brown"},ce={class:"text-deep-orange"},ue={class:"d-md-none text-brown"},_e={class:"text-brown"},pe={class:"d-md-none text-brown"},fe={class:"text-deep-orange"},$e={__name:"OrderView",setup(me){N(()=>{S.init()});const m=T(),h=b(!1),_=b("\u5168\u90E8"),i=k([]),g=k({_id:"",idx:0}),y=k(["\u5168\u90E8","\u672A\u4ED8\u6B3E","\u8A02\u55AE\u6210\u7ACB","\u8A02\u55AE\u53D6\u6D88"]),C=D(()=>_.value==="\u5168\u90E8"?i:_.value==="\u672A\u4ED8\u6B3E"?i.filter(t=>t.state===0):_.value==="\u8A02\u55AE\u6210\u7ACB"?i.filter(t=>t.state===1):i.filter(t=>t.state===2)),B=t=>{const d=i.findIndex(n=>n._id===t);g._id=i[d]._id,g.idx=d,h.value=!0};return(async()=>{try{const{data:t}=await F.get("/orders");i.push(...t.result.map(d=>(d.totalPrice=d.products.reduce((n,c)=>n+c.product.price*c.quantity,0),d)))}catch{q.fire({icon:"error",title:"\u5931\u6557",text:"\u7121\u6CD5\u53D6\u5F97\u8A02\u55AE"})}})(),(t,d)=>(r(),u("div",R,[l("div",H,[l("h1",Q,s(t.$t("orderrecord")),1),e(p,{class:"mt-5"},{default:a(()=>[e(o,{cols:"12",md:"3"},{default:a(()=>[e(M,{modelValue:_.value,"onUpdate:modelValue":d[0]||(d[0]=n=>_.value=n),variant:"outlined",items:y,"append-inner-icon":"mdi-filter-menu-outline"},null,8,["modelValue","items"])]),_:1})]),_:1}),e(p,{class:"d-none d-lg-flex"},{default:a(()=>[e(o,{class:"text-h6"},{default:a(()=>[l("span",null,s(t.$t("orderid")),1)]),_:1}),e(o,{class:"text-h6"},{default:a(()=>[l("span",null,s(t.$t("orderdate")),1)]),_:1}),e(o,{class:"text-h6"},{default:a(()=>[l("span",null,s(t.$t("orderstate")),1)]),_:1}),e(o,{class:"text-h6"},{default:a(()=>[l("span",null,s(t.$t("totalprice")),1)]),_:1}),e(o,{class:"text-h6"},{default:a(()=>[l("span",null,s(t.$t("detail")),1)]),_:1})]),_:1}),e($,{class:"mb-10 d-none d-lg-block"}),l("div",j,[i.length>0?(r(!0),u(v,{key:0},w(f(C),n=>(r(),V(p,{key:n._id,class:"pt-3 pb-3 mt-10",style:{"border-left":"3px solid #FFEB3B"}},{default:a(()=>[e(o,{cols:"12",lg:"",class:"d-flex align-center"},{default:a(()=>[l("span",{class:"d-lg-none",onClick:c=>f(m).push("/order/"+n._id),style:{cursor:"pointer"}},s(t.$t("orderid"))+" : ",9,z),l("span",{onClick:c=>f(m).push("/order/"+n._id),style:{cursor:"pointer"},class:"order_id"},s(n._id),9,G)]),_:2},1024),e(o,{cols:"12",lg:"",class:"d-flex align-center"},{default:a(()=>[l("span",J,s(t.$t("orderdate"))+" : ",1),l("span",null,s(new Date(n.date).toLocaleString()),1)]),_:2},1024),e(o,{cols:"12",md:"4",lg:"",class:"d-flex align-center"},{default:a(()=>[l("span",K,s(t.$t("orderstate"))+" : ",1),n.state===0?(r(),u("span",W,s(t.$t("unpaid")),1)):n.state===1?(r(),u("span",X,s(t.$t("orderestablished")),1)):(r(),u("span",Y,s(t.$t("ordercancel")),1))]),_:2},1024),e(o,{cols:"12",md:"4",lg:"",class:"d-flex align-center"},{default:a(()=>[l("span",Z,s(t.$t("totalprice"))+" : ",1),l("span",null,"NT. "+s(n.totalPrice),1)]),_:2},1024),e(o,{cols:"12",md:"4",lg:""},{default:a(()=>[l("span",ee,s(t.$t("detail"))+" : ",1),e(x,{icon:"",variant:"text",onClick:c=>B(n._id)},{default:a(()=>[e(O,{icon:"mdi-plus"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128)):(r(),u("h1",te,"\u6C92\u6709\u8A02\u55AE\u54E6")),e(A,{modelValue:h.value,"onUpdate:modelValue":d[2]||(d[2]=n=>h.value=n)},{default:a(()=>[e(P,null,{default:a(()=>[e(U,null,{default:a(()=>[l("h3",se,"~~~~~ "+s(t.$t("orderid"))+" :"+s(g._id)+" ~~~~~",1)]),_:1}),e(E,null,{default:a(()=>[e(p,{class:"d-none d-md-flex"},{default:a(()=>[e(o,{cols:"12",md:"5"},{default:a(()=>[l("span",ae,s(t.$t("product")),1)]),_:1}),e(o,{cols:"12",md:"2"},{default:a(()=>[l("span",le,s(t.$t("singleprice")),1)]),_:1}),e(o,{cols:"12",md:"2"},{default:a(()=>[l("span",ne,s(t.$t("amount")),1)]),_:1}),e(o,{cols:"12",md:"3"},{default:a(()=>[l("span",oe,s(t.$t("totalprice")),1)]),_:1})]),_:1}),e($,{class:"d-none d-md-block mb-1"}),(r(!0),u(v,null,w(i[g.idx].products,n=>(r(),V(p,{key:n._id},{default:a(()=>[e(o,{cols:"12",md:"5"},{default:a(()=>[l("span",{class:"d-none d-md-block text-brown",onClick:c=>f(m).push("/product/"+n.product._id),style:{cursor:"pointer"}},s(n.product.name),9,de),l("span",{class:"d-md-none text-h6 text-brown",onClick:c=>f(m).push("/product/"+n.product._id),style:{cursor:"pointer"}},[l("b",null,s(n.product.name),1)],8,ie)]),_:2},1024),e(o,{cols:"4",md:"2"},{default:a(()=>[l("span",re,s(t.$t("singleprice"))+" : ",1),l("span",ce,"NT. "+s(n.product.price),1)]),_:2},1024),e(o,{cols:"4",md:"2"},{default:a(()=>[l("span",ue,s(t.$t("amount"))+" : ",1),l("span",_e,s(n.quantity),1)]),_:2},1024),e(o,{cols:"4",md:"3"},{default:a(()=>[l("span",pe,s(t.$t("totalprice"))+" : ",1),l("span",fe,"NT. "+s(n.product.price*n.quantity),1)]),_:2},1024),e($,{class:"d-md-none"})]),_:2},1024))),128)),e($,{class:"d-none d-md-block"})]),_:1}),e(I,null,{default:a(()=>[e(x,{color:"brown",block:"",onClick:d[1]||(d[1]=n=>h.value=!1)},{default:a(()=>[L(s(t.$t("close")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])])]))}};export{$e as default};

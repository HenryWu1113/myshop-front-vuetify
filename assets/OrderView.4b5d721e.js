import{r as $,o as L,A,M as F,N as b,C as P,a as d,c,b as l,t as s,d as t,w as a,V as _,e as v,F as y,O as C,P as f,Q as m,a3 as q,R as x,a9 as I,T as M,f as o,aC as O,H as N,a4 as R,a7 as U,av as E,a8 as W,ax as j,W as S,X as z}from"./index.22ab6a7b.js";const H={id:"front_order_view"},J={class:"MyContainer"},Q={class:"text-h2 text-center mt-15 text-brown font-weight-bold","data-aos":"fade-down","data-aos-duration":"1000","data-aos-offset":"150"},X={class:"order_panel"},G=["onClick"],K=["onClick"],Y={class:"d-lg-none"},Z={key:0},ee={key:1},te={key:2},se={class:"d-lg-none"},ae={key:0},ne={key:1},le={key:2},oe={class:"d-lg-none"},de={class:"d-lg-none"},ie=S("\u6C92\u6709\u8A02\u55AE\u54E6"),re={class:"text-center mt-4 text-brown"},ce={class:"text-brown"},ue={class:"text-brown"},_e={class:"text-brown"},pe={class:"text-brown"},fe=["onClick"],me=["onClick"],he={class:"d-md-none text-brown"},ge={class:"text-deep-orange"},ke={class:"d-md-none text-brown"},$e={class:"text-brown"},ve={class:"d-md-none text-brown"},we={class:"text-deep-orange"},Ce={__name:"OrderView",setup(be){const w=$(!1),V=$(!1);L(()=>{A.init()});const h=F(),g=$(!1),p=$("\u5168\u90E8"),r=b([]),k=b({_id:"",idx:0}),T=b(["\u5168\u90E8","\u672A\u4ED8\u6B3E","\u8A02\u55AE\u6210\u7ACB","\u8A02\u55AE\u53D6\u6D88"]),B=P(()=>p.value==="\u5168\u90E8"?r:p.value==="\u672A\u4ED8\u6B3E"?r.filter(e=>e.state===0):p.value==="\u8A02\u55AE\u6210\u7ACB"?r.filter(e=>e.state===1):r.filter(e=>e.state===2)),D=e=>{const i=r.findIndex(n=>n._id===e);k._id=r[i]._id,k.idx=i,g.value=!0};return(async()=>{try{w.value=!0;const{data:e}=await I.get("/orders");r.push(...e.result.map(i=>(i.totalPrice=i.products.reduce((n,u)=>n+u.product.price*u.quantity,0),i))),w.value=!1,V.value=!0}catch{M.fire({icon:"error",title:"\u5931\u6557",text:"\u7121\u6CD5\u53D6\u5F97\u8A02\u55AE"})}})(),(e,i)=>(d(),c(y,null,[l("div",H,[l("div",J,[l("h1",Q,s(e.$t("orderrecord")),1),t(_,{class:"mt-5"},{default:a(()=>[t(o,{cols:"12",md:"3"},{default:a(()=>[t(O,{modelValue:p.value,"onUpdate:modelValue":i[0]||(i[0]=n=>p.value=n),variant:"outlined",items:T,"append-inner-icon":"mdi-filter-menu-outline"},null,8,["modelValue","items"])]),_:1})]),_:1}),t(_,{class:"d-none d-lg-flex"},{default:a(()=>[t(o,{class:"text-h6"},{default:a(()=>[l("span",null,s(e.$t("orderid")),1)]),_:1}),t(o,{class:"text-h6"},{default:a(()=>[l("span",null,s(e.$t("orderdate")),1)]),_:1}),t(o,{class:"text-h6"},{default:a(()=>[l("span",null,s(e.$t("orderstate")),1)]),_:1}),t(o,{class:"text-h6"},{default:a(()=>[l("span",null,s(e.$t("totalprice")),1)]),_:1}),t(o,{class:"text-h6"},{default:a(()=>[l("span",null,s(e.$t("detail")),1)]),_:1})]),_:1}),t(v,{class:"mb-10 d-none d-lg-block"}),l("div",X,[r.length>0?(d(!0),c(y,{key:0},C(f(B),n=>(d(),m(_,{key:n._id,class:"pt-3 pb-3 mt-10",style:{"border-left":"3px solid #FFEB3B"}},{default:a(()=>[t(o,{cols:"12",lg:"",class:"d-flex align-center"},{default:a(()=>[l("span",{class:"d-lg-none",onClick:u=>f(h).push("/order/"+n._id),style:{cursor:"pointer"}},s(e.$t("orderid"))+" : ",9,G),l("span",{onClick:u=>f(h).push("/order/"+n._id),style:{cursor:"pointer"},class:"order_id"},s(n._id),9,K)]),_:2},1024),t(o,{cols:"12",lg:"",class:"d-flex align-center"},{default:a(()=>[l("span",Y,s(e.$t("orderdate"))+" : ",1),e.$i18n.locale==="tw"?(d(),c("span",Z,s(new Date(n.date).toLocaleString("zh-TW")),1)):e.$i18n.locale==="en"?(d(),c("span",ee,s(new Date(n.date).toLocaleString("en-US")),1)):(d(),c("span",te,s(new Date(n.date).toLocaleString("ja-JP")),1))]),_:2},1024),t(o,{cols:"12",md:"4",lg:"",class:"d-flex align-center"},{default:a(()=>[l("span",se,s(e.$t("orderstate"))+" : ",1),n.state===0?(d(),c("span",ae,s(e.$t("unpaid")),1)):n.state===1?(d(),c("span",ne,s(e.$t("orderestablished")),1)):(d(),c("span",le,s(e.$t("ordercancel")),1))]),_:2},1024),t(o,{cols:"12",md:"4",lg:"",class:"d-flex align-center"},{default:a(()=>[l("span",oe,s(e.$t("totalprice"))+" : ",1),l("span",null,"NT. "+s(n.totalPrice),1)]),_:2},1024),t(o,{cols:"12",md:"4",lg:""},{default:a(()=>[l("span",de,s(e.$t("detail"))+" : ",1),t(N,{icon:"",variant:"text",onClick:u=>D(n._id)},{default:a(()=>[t(R,{icon:"mdi-plus"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128)):(d(),m(_,{key:1},{default:a(()=>[V.value?(d(),m(o,{key:0,cols:"12",class:"text-center"},{default:a(()=>[ie]),_:1})):x("",!0)]),_:1})),t(q,{modelValue:g.value,"onUpdate:modelValue":i[2]||(i[2]=n=>g.value=n)},{default:a(()=>[t(U,null,{default:a(()=>[t(E,null,{default:a(()=>[l("h3",re,"~~~~~ "+s(e.$t("orderid"))+" :"+s(k._id)+" ~~~~~",1)]),_:1}),t(W,null,{default:a(()=>[t(_,{class:"d-none d-md-flex"},{default:a(()=>[t(o,{cols:"12",md:"5"},{default:a(()=>[l("span",ce,s(e.$t("product")),1)]),_:1}),t(o,{cols:"12",md:"2"},{default:a(()=>[l("span",ue,s(e.$t("singleprice")),1)]),_:1}),t(o,{cols:"12",md:"2"},{default:a(()=>[l("span",_e,s(e.$t("amount")),1)]),_:1}),t(o,{cols:"12",md:"3"},{default:a(()=>[l("span",pe,s(e.$t("totalprice")),1)]),_:1})]),_:1}),t(v,{class:"d-none d-md-block mb-1"}),(d(!0),c(y,null,C(r[k.idx].products,n=>(d(),m(_,{key:n._id},{default:a(()=>[t(o,{cols:"12",md:"5"},{default:a(()=>[l("span",{class:"d-none d-md-block text-brown",onClick:u=>f(h).push("/product/"+n.product._id),style:{cursor:"pointer"}},s(n.product.name),9,fe),l("span",{class:"d-md-none text-h6 text-brown",onClick:u=>f(h).push("/product/"+n.product._id),style:{cursor:"pointer"}},[l("b",null,s(n.product.name),1)],8,me)]),_:2},1024),t(o,{cols:"4",md:"2"},{default:a(()=>[l("span",he,s(e.$t("singleprice"))+" : ",1),l("span",ge,"NT. "+s(n.product.price),1)]),_:2},1024),t(o,{cols:"4",md:"2"},{default:a(()=>[l("span",ke,s(e.$t("amount"))+" : ",1),l("span",$e,s(n.quantity),1)]),_:2},1024),t(o,{cols:"4",md:"3"},{default:a(()=>[l("span",ve,s(e.$t("totalprice"))+" : ",1),l("span",we,"NT. "+s(n.product.price*n.quantity),1)]),_:2},1024),t(v,{class:"d-md-none"})]),_:2},1024))),128)),t(v,{class:"d-none d-md-block"})]),_:1}),t(j,null,{default:a(()=>[t(N,{color:"brown",block:"",onClick:i[1]||(i[1]=n=>g.value=!1)},{default:a(()=>[S(s(e.$t("close")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])])]),w.value?(d(),m(z,{key:0})):x("",!0)],64))}};export{Ce as default};

import{J as $,r as b,K as k,z as D,o as c,c as r,a as s,b as t,w as e,V as p,d as g,F as v,M as w,N as f,$ as T,a5 as S,S as F,e as l,aC as q,O as V,L as i,D as y,a0 as L,a3 as R,at as A,a4 as E,av as I,R as M}from"./index.4b7b983c.js";const O={id:"front_order_view"},P={class:"MyContainer"},U=s("h1",{class:"text-h2 text-center mt-15 text-brown font-weight-bold"},[s("b",null,"\u8A02\u8CFC\u7D00\u9304")],-1),z=s("span",null,"\u8A02\u55AE\u7DE8\u865F",-1),J=s("span",null,"\u8A02\u8CFC\u65E5\u671F",-1),K=s("span",null,"\u8A02\u55AE\u72C0\u614B",-1),j=s("span",null,"\u7E3D\u50F9",-1),G=s("span",null,"\u8A73\u7D30\u8CC7\u8A0A",-1),H={class:"order_panel"},Q=["onClick"],W=["onClick"],X=s("span",{class:"d-lg-none"},"\u8A02\u8CFC\u65E5\u671F : ",-1),Y=s("span",{class:"d-lg-none"},"\u8A02\u55AE\u72C0\u614B : ",-1),Z={key:0},tt={key:1},et={key:2},st=s("span",{class:"d-lg-none"},"\u7E3D\u50F9 : ",-1),nt=s("span",{class:"d-lg-none"},"\u8A73\u7D30\u8CC7\u8A0A : ",-1),lt={key:1,class:"text-h1 text-center mt-10"},at={class:"text-center mt-4 text-brown"},ot=s("span",{class:"text-brown"},"\u7522\u54C1",-1),dt=s("span",{class:"text-brown"},"\u55AE\u50F9",-1),ct=s("span",{class:"text-brown"},"\u6578\u91CF",-1),it=s("span",{class:"text-brown"},"\u7E3D\u50F9",-1),_t=["onClick"],rt=["onClick"],ut=s("span",{class:"d-md-none text-brown"},"\u55AE\u50F9 : ",-1),pt={class:"text-deep-orange"},ft=s("span",{class:"d-md-none text-brown"},"\u6578\u91CF : ",-1),mt={class:"text-brown"},ht=s("span",{class:"d-md-none text-brown"},"\u7E3D\u50F9 : ",-1),xt={class:"text-deep-orange"},gt=M("\u95DC\u9589"),wt={__name:"OrderView",setup(kt){const m=$(),h=b(!1),u=b("\u5168\u90E8"),d=k([]),x=k({_id:"",idx:0}),C=k(["\u5168\u90E8","\u672A\u4ED8\u6B3E","\u8A02\u55AE\u6210\u7ACB","\u8A02\u55AE\u53D6\u6D88"]),B=D(()=>u.value==="\u5168\u90E8"?d:u.value==="\u672A\u4ED8\u6B3E"?d.filter(o=>o.state===0):u.value==="\u8A02\u55AE\u6210\u7ACB"?d.filter(o=>o.state===1):d.filter(o=>o.state===2)),N=o=>{const a=d.findIndex(n=>n._id===o);x._id=d[a]._id,x.idx=a,h.value=!0};return(async()=>{try{const{data:o}=await S.get("/orders");d.push(...o.result.map(a=>(a.totalPrice=a.products.reduce((n,_)=>n+_.product.price*_.quantity,0),a)))}catch{F.fire({icon:"error",title:"\u5931\u6557",text:"\u7121\u6CD5\u53D6\u5F97\u8A02\u55AE"})}})(),(o,a)=>(c(),r("div",O,[s("div",P,[U,t(p,{class:"mt-5"},{default:e(()=>[t(l,{cols:"12",md:"3"},{default:e(()=>[t(q,{modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=n=>u.value=n),variant:"outlined",items:C,"append-inner-icon":"mdi-filter-menu-outline"},null,8,["modelValue","items"])]),_:1})]),_:1}),t(p,{class:"d-none d-lg-flex"},{default:e(()=>[t(l,{class:"text-h6"},{default:e(()=>[z]),_:1}),t(l,{class:"text-h6"},{default:e(()=>[J]),_:1}),t(l,{class:"text-h6"},{default:e(()=>[K]),_:1}),t(l,{class:"text-h6"},{default:e(()=>[j]),_:1}),t(l,{class:"text-h6"},{default:e(()=>[G]),_:1})]),_:1}),t(g,{class:"mb-10 d-none d-lg-block"}),s("div",H,[d.length>0?(c(!0),r(v,{key:0},w(f(B),n=>(c(),V(p,{key:n._id,class:"pt-3 pb-3 mt-10",style:{"border-left":"3px solid #FFEB3B"}},{default:e(()=>[t(l,{cols:"12",lg:"",class:"d-flex align-center"},{default:e(()=>[s("span",{class:"d-lg-none",onClick:_=>f(m).push("/order/"+n._id),style:{cursor:"pointer"}},"\u8A02\u55AE\u7DE8\u865F : ",8,Q),s("span",{onClick:_=>f(m).push("/order/"+n._id),style:{cursor:"pointer"},class:"order_id"},i(n._id),9,W)]),_:2},1024),t(l,{cols:"12",lg:"",class:"d-flex align-center"},{default:e(()=>[X,s("span",null,i(new Date(n.date).toLocaleString()),1)]),_:2},1024),t(l,{cols:"12",md:"4",lg:"",class:"d-flex align-center"},{default:e(()=>[Y,n.state===0?(c(),r("span",Z,"\u672A\u4ED8\u6B3E")):n.state===1?(c(),r("span",tt,"\u8A02\u55AE\u6210\u7ACB")):(c(),r("span",et,"\u8A02\u55AE\u53D6\u6D88"))]),_:2},1024),t(l,{cols:"12",md:"4",lg:"",class:"d-flex align-center"},{default:e(()=>[st,s("span",null,"NT. "+i(n.totalPrice),1)]),_:2},1024),t(l,{cols:"12",md:"4",lg:""},{default:e(()=>[nt,t(y,{icon:"",variant:"text",onClick:_=>N(n._id)},{default:e(()=>[t(L,{icon:"mdi-plus"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128)):(c(),r("h1",lt,"\u6C92\u6709\u8A02\u55AE\u54E6")),t(T,{modelValue:h.value,"onUpdate:modelValue":a[2]||(a[2]=n=>h.value=n)},{default:e(()=>[t(R,null,{default:e(()=>[t(A,null,{default:e(()=>[s("h3",at,"~~~~~ \u8A02\u55AE\u7DE8\u865F :"+i(x._id)+" ~~~~~",1)]),_:1}),t(E,null,{default:e(()=>[t(p,{class:"d-none d-md-flex"},{default:e(()=>[t(l,{cols:"12",md:"5"},{default:e(()=>[ot]),_:1}),t(l,{cols:"12",md:"2"},{default:e(()=>[dt]),_:1}),t(l,{cols:"12",md:"2"},{default:e(()=>[ct]),_:1}),t(l,{cols:"12",md:"3"},{default:e(()=>[it]),_:1})]),_:1}),t(g,{class:"d-none d-md-block mb-1"}),(c(!0),r(v,null,w(d[x.idx].products,n=>(c(),V(p,{key:n._id},{default:e(()=>[t(l,{cols:"12",md:"5"},{default:e(()=>[s("span",{class:"d-none d-md-block text-brown",onClick:_=>f(m).push("/product/"+n.product._id),style:{cursor:"pointer"}},i(n.product.name),9,_t),s("span",{class:"d-md-none text-h6 text-brown",onClick:_=>f(m).push("/product/"+n.product._id),style:{cursor:"pointer"}},[s("b",null,i(n.product.name),1)],8,rt)]),_:2},1024),t(l,{cols:"4",md:"2"},{default:e(()=>[ut,s("span",pt,"NT. "+i(n.product.price),1)]),_:2},1024),t(l,{cols:"4",md:"2"},{default:e(()=>[ft,s("span",mt,i(n.quantity),1)]),_:2},1024),t(l,{cols:"4",md:"3"},{default:e(()=>[ht,s("span",xt,"NT. "+i(n.product.price*n.quantity),1)]),_:2},1024),t(g,{class:"d-md-none"})]),_:2},1024))),128)),t(g,{class:"d-none d-md-block"})]),_:1}),t(I,null,{default:e(()=>[t(y,{color:"brown",block:"",onClick:a[1]||(a[1]=n=>h.value=!1)},{default:e(()=>[gt]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])])]))}};export{wt as default};

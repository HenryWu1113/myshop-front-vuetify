import{r as w,o as T,A as L,M as A,N as b,C as F,a as i,c,b as l,t as s,d as t,w as a,V as _,e as $,F as V,O as C,P as f,Q as k,a3 as P,a9 as U,S as q,f as o,aC as M,H as x,a4 as O,U as E,a7 as I,av as R,a8 as W,ax as j,W as S,X as z}from"./index.790d3547.js";const H={id:"front_order_view"},J={class:"MyContainer"},Q={class:"text-h2 text-center mt-15 text-brown font-weight-bold","data-aos":"fade-down","data-aos-duration":"1000","data-aos-offset":"150"},X={class:"order_panel"},G=["onClick"],K=["onClick"],Y={class:"d-lg-none"},Z={key:0},ee={key:1},te={key:2},se={class:"d-lg-none"},ae={key:0},ne={key:1},le={key:2},oe={class:"d-lg-none"},de={class:"d-lg-none"},ie=S("\u6C92\u6709\u8A02\u55AE\u54E6"),re={class:"text-center mt-4 text-brown"},ce={class:"text-brown"},ue={class:"text-brown"},_e={class:"text-brown"},pe={class:"text-brown"},fe=["onClick"],me=["onClick"],he={class:"d-md-none text-brown"},ge={class:"text-deep-orange"},$e={class:"d-md-none text-brown"},ke={class:"text-brown"},we={class:"d-md-none text-brown"},be={class:"text-deep-orange"},Ce={__name:"OrderView",setup(ve){const v=z(),y=w(!1);T(()=>{L.init()});const m=A(),h=w(!1),p=w("\u5168\u90E8"),r=b([]),g=b({_id:"",idx:0}),N=b(["\u5168\u90E8","\u672A\u4ED8\u6B3E","\u8A02\u55AE\u6210\u7ACB","\u8A02\u55AE\u53D6\u6D88"]),B=F(()=>p.value==="\u5168\u90E8"?r:p.value==="\u672A\u4ED8\u6B3E"?r.filter(e=>e.state===0):p.value==="\u8A02\u55AE\u6210\u7ACB"?r.filter(e=>e.state===1):r.filter(e=>e.state===2)),D=e=>{const d=r.findIndex(n=>n._id===e);g._id=r[d]._id,g.idx=d,h.value=!0};return(async()=>{try{v.show({color:"orange",loader:"bars",width:100,height:100});const{data:e}=await U.get("/orders");r.push(...e.result.map(d=>(d.totalPrice=d.products.reduce((n,u)=>n+u.product.price*u.quantity,0),d))),v.hide(),y.value=!0}catch{q.fire({icon:"error",title:"\u5931\u6557",text:"\u7121\u6CD5\u53D6\u5F97\u8A02\u55AE"})}})(),(e,d)=>(i(),c("div",H,[l("div",J,[l("h1",Q,s(e.$t("orderrecord")),1),t(_,{class:"mt-5"},{default:a(()=>[t(o,{cols:"12",md:"3"},{default:a(()=>[t(M,{modelValue:p.value,"onUpdate:modelValue":d[0]||(d[0]=n=>p.value=n),variant:"outlined",items:N,"append-inner-icon":"mdi-filter-menu-outline"},null,8,["modelValue","items"])]),_:1})]),_:1}),t(_,{class:"d-none d-lg-flex"},{default:a(()=>[t(o,{class:"text-h6"},{default:a(()=>[l("span",null,s(e.$t("orderid")),1)]),_:1}),t(o,{class:"text-h6"},{default:a(()=>[l("span",null,s(e.$t("orderdate")),1)]),_:1}),t(o,{class:"text-h6"},{default:a(()=>[l("span",null,s(e.$t("orderstate")),1)]),_:1}),t(o,{class:"text-h6"},{default:a(()=>[l("span",null,s(e.$t("totalprice")),1)]),_:1}),t(o,{class:"text-h6"},{default:a(()=>[l("span",null,s(e.$t("detail")),1)]),_:1})]),_:1}),t($,{class:"mb-10 d-none d-lg-block"}),l("div",X,[r.length>0?(i(!0),c(V,{key:0},C(f(B),n=>(i(),k(_,{key:n._id,class:"pt-3 pb-3 mt-10",style:{"border-left":"3px solid #FFEB3B"}},{default:a(()=>[t(o,{cols:"12",lg:"",class:"d-flex align-center"},{default:a(()=>[l("span",{class:"d-lg-none",onClick:u=>f(m).push("/order/"+n._id),style:{cursor:"pointer"}},s(e.$t("orderid"))+" : ",9,G),l("span",{onClick:u=>f(m).push("/order/"+n._id),style:{cursor:"pointer"},class:"order_id"},s(n._id),9,K)]),_:2},1024),t(o,{cols:"12",lg:"",class:"d-flex align-center"},{default:a(()=>[l("span",Y,s(e.$t("orderdate"))+" : ",1),e.$i18n.locale==="tw"?(i(),c("span",Z,s(new Date(n.date).toLocaleString("zh-TW")),1)):e.$i18n.locale==="en"?(i(),c("span",ee,s(new Date(n.date).toLocaleString("en-US")),1)):(i(),c("span",te,s(new Date(n.date).toLocaleString("ja-JP")),1))]),_:2},1024),t(o,{cols:"12",md:"4",lg:"",class:"d-flex align-center"},{default:a(()=>[l("span",se,s(e.$t("orderstate"))+" : ",1),n.state===0?(i(),c("span",ae,s(e.$t("unpaid")),1)):n.state===1?(i(),c("span",ne,s(e.$t("orderestablished")),1)):(i(),c("span",le,s(e.$t("ordercancel")),1))]),_:2},1024),t(o,{cols:"12",md:"4",lg:"",class:"d-flex align-center"},{default:a(()=>[l("span",oe,s(e.$t("totalprice"))+" : ",1),l("span",null,"NT. "+s(n.totalPrice),1)]),_:2},1024),t(o,{cols:"12",md:"4",lg:""},{default:a(()=>[l("span",de,s(e.$t("detail"))+" : ",1),t(x,{icon:"",variant:"text",onClick:u=>D(n._id)},{default:a(()=>[t(O,{icon:"mdi-plus"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128)):(i(),k(_,{key:1},{default:a(()=>[y.value?(i(),k(o,{key:0,cols:"12",class:"text-center"},{default:a(()=>[ie]),_:1})):E("",!0)]),_:1})),t(P,{modelValue:h.value,"onUpdate:modelValue":d[2]||(d[2]=n=>h.value=n)},{default:a(()=>[t(I,null,{default:a(()=>[t(R,null,{default:a(()=>[l("h3",re,"~~~~~ "+s(e.$t("orderid"))+" :"+s(g._id)+" ~~~~~",1)]),_:1}),t(W,null,{default:a(()=>[t(_,{class:"d-none d-md-flex"},{default:a(()=>[t(o,{cols:"12",md:"5"},{default:a(()=>[l("span",ce,s(e.$t("product")),1)]),_:1}),t(o,{cols:"12",md:"2"},{default:a(()=>[l("span",ue,s(e.$t("singleprice")),1)]),_:1}),t(o,{cols:"12",md:"2"},{default:a(()=>[l("span",_e,s(e.$t("amount")),1)]),_:1}),t(o,{cols:"12",md:"3"},{default:a(()=>[l("span",pe,s(e.$t("totalprice")),1)]),_:1})]),_:1}),t($,{class:"d-none d-md-block mb-1"}),(i(!0),c(V,null,C(r[g.idx].products,n=>(i(),k(_,{key:n._id},{default:a(()=>[t(o,{cols:"12",md:"5"},{default:a(()=>[l("span",{class:"d-none d-md-block text-brown",onClick:u=>f(m).push("/product/"+n.product._id),style:{cursor:"pointer"}},s(n.product.name),9,fe),l("span",{class:"d-md-none text-h6 text-brown",onClick:u=>f(m).push("/product/"+n.product._id),style:{cursor:"pointer"}},[l("b",null,s(n.product.name),1)],8,me)]),_:2},1024),t(o,{cols:"4",md:"2"},{default:a(()=>[l("span",he,s(e.$t("singleprice"))+" : ",1),l("span",ge,"NT. "+s(n.product.price),1)]),_:2},1024),t(o,{cols:"4",md:"2"},{default:a(()=>[l("span",$e,s(e.$t("amount"))+" : ",1),l("span",ke,s(n.quantity),1)]),_:2},1024),t(o,{cols:"4",md:"3"},{default:a(()=>[l("span",we,s(e.$t("totalprice"))+" : ",1),l("span",be,"NT. "+s(n.product.price*n.quantity),1)]),_:2},1024),t($,{class:"d-md-none"})]),_:2},1024))),128)),t($,{class:"d-none d-md-block"})]),_:1}),t(j,null,{default:a(()=>[t(x,{color:"brown",block:"",onClick:d[1]||(d[1]=n=>h.value=!1)},{default:a(()=>[S(s(e.$t("close")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])])]))}};export{Ce as default};

import{i as J,a8 as L,a9 as Q,aa as W,u as X,B as x,r as c,o as Y,Z as h,_ as p,D as ee,ab as te,ac as ae,ad as le,d as a,ae as ne,H as y,F as P,af as H,ag as oe,ah as ue,ai as re,aj as se,ak as ie,K as _,al as ce}from"./index.13eabeb3.js";const ve=J({name:"VTextarea",directives:{Intersect:L},inheritAttrs:!1,props:{autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,hint:String,persistentHint:Boolean,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,...Q(),...W()},emits:{"click:clear":e=>!0,"click:control":e=>!0,"update:modelValue":e=>!0},setup(e,S){let{attrs:V,emit:b,slots:u}=S;const l=X(e,"modelValue"),N=x(()=>typeof e.counterValue=="function"?e.counterValue(l.value):(l.value||"").toString().length),z=x(()=>{if(V.maxlength)return V.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function D(t,n){var o,r;!e.autofocus||!t||(o=n[0].target)==null||(r=o.focus)==null||r.call(o)}const T=c(),$=c(),s=c(!1),C=c("auto"),f=c(),R=x(()=>s.value||e.persistentPlaceholder),A=x(()=>e.messages.length?e.messages:R.value||e.persistentHint?e.hint:"");function w(){if(f.value!==document.activeElement){var t;(t=f.value)==null||t.focus()}s.value||(s.value=!0)}function G(t){w(),b("click:control",t)}function M(t){t.stopPropagation(),w(),_(()=>{l.value="",b("click:clear",t)})}function U(t){l.value=t.target.value}const i=c();function d(){!e.autoGrow||_(()=>{if(!i.value)return;const t=getComputedStyle(i.value),n=parseFloat(t.getPropertyValue("--v-field-padding-top"))+parseFloat(t.getPropertyValue("--v-field-padding-bottom")),o=i.value.scrollHeight,r=parseFloat(t.lineHeight),k=parseFloat(e.rows)*r+n,F=parseFloat(e.maxRows)*r+n||1/0;C.value=ce(Math.min(F,Math.max(k,o!=null?o:0)))})}Y(d),h(l,d),h(()=>e.rows,d),h(()=>e.maxRows,d);let m;return h(i,t=>{if(t)m=new ResizeObserver(d),m.observe(i.value);else{var n;(n=m)==null||n.disconnect()}}),p(()=>{var t;(t=m)==null||t.disconnect()}),ee(()=>{const t=!!(u.counter||e.counter||e.counterValue),n=!!(t||u.details),[o,r]=te(V),[{modelValue:k,...F}]=ae(e),[j]=le(e);return a(se,y({modelValue:l.value,"onUpdate:modelValue":v=>l.value=v,class:["v-textarea",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow}]},o,F,{messages:A.value}),{...u,default:v=>{let{isDisabled:g,isDirty:I,isReadonly:E,isValid:K}=v;return a(ne,y({style:{"--v-input-control-height":C.value},"onClick:control":G,"onClick:clear":M,role:"textbox"},j,{active:R.value||I.value,dirty:I.value||e.dirty,focused:s.value,error:K.value===!1}),{...u,default:O=>{let{props:{class:B,...Z}}=O;return a(P,null,[e.prefix&&a("span",{class:"v-text-field__prefix"},[e.prefix]),H(a("textarea",y({ref:f,class:B,value:l.value,onInput:U,autofocus:e.autofocus,readonly:E.value,disabled:g.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:w,onBlur:()=>s.value=!1},Z,r),null),[[oe("intersect"),{handler:D},null,{once:!0}]]),e.autoGrow&&H(a("textarea",{class:[B,"v-textarea__sizer"],"onUpdate:modelValue":q=>l.value=q,ref:i,readonly:!0,"aria-hidden":"true"},null),[[ue,l.value]]),e.suffix&&a("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:n?v=>{var g;return a(P,null,[(g=u.details)==null?void 0:g.call(u,v),t&&a(P,null,[a("span",null,null),a(re,{active:e.persistentCounter||s.value,value:N.value,max:z.value},u.counter)])])}:void 0})}),ie({},T,$,f)}});export{ve as V};

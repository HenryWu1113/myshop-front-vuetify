import{o as S,A as T,L as $,r as b,M as k,B as D,a as c,c as r,b as s,d as t,w as e,V as p,e as g,F as v,O as w,P as f,a1 as A,a7 as F,S as q,f as a,aB as L,Q as V,N as i,G as y,a2 as M,a5 as O,at as P,a6 as U,av as E,U as I}from"./index.13eabeb3.js";const R={id:"front_order_view"},G={class:"MyContainer"},Q=s("h1",{class:"text-h2 text-center mt-15 text-brown font-weight-bold","data-aos":"fade-down","data-aos-duration":"1000","data-aos-offset":"150"},"\u8A02\u8CFC\u7D00\u9304",-1),j=s("span",null,"\u8A02\u55AE\u7DE8\u865F",-1),z=s("span",null,"\u8A02\u8CFC\u65E5\u671F",-1),H=s("span",null,"\u8A02\u55AE\u72C0\u614B",-1),J=s("span",null,"\u7E3D\u50F9",-1),K=s("span",null,"\u8A73\u7D30\u8CC7\u8A0A",-1),W={class:"order_panel"},X=["onClick"],Y=["onClick"],Z=s("span",{class:"d-lg-none"},"\u8A02\u8CFC\u65E5\u671F : ",-1),tt=s("span",{class:"d-lg-none"},"\u8A02\u55AE\u72C0\u614B : ",-1),et={key:0},st={key:1},nt={key:2},at=s("span",{class:"d-lg-none"},"\u7E3D\u50F9 : ",-1),lt=s("span",{class:"d-lg-none"},"\u8A73\u7D30\u8CC7\u8A0A : ",-1),ot={key:1,class:"text-h1 text-center mt-10"},dt={class:"text-center mt-4 text-brown"},ct=s("span",{class:"text-brown"},"\u7522\u54C1",-1),it=s("span",{class:"text-brown"},"\u55AE\u50F9",-1),_t=s("span",{class:"text-brown"},"\u6578\u91CF",-1),rt=s("span",{class:"text-brown"},"\u7E3D\u50F9",-1),ut=["onClick"],pt=["onClick"],ft=s("span",{class:"d-md-none text-brown"},"\u55AE\u50F9 : ",-1),mt={class:"text-deep-orange"},ht=s("span",{class:"d-md-none text-brown"},"\u6578\u91CF : ",-1),xt={class:"text-brown"},gt=s("span",{class:"d-md-none text-brown"},"\u7E3D\u50F9 : ",-1),kt={class:"text-deep-orange"},bt=I("\u95DC\u9589"),yt={__name:"OrderView",setup(vt){S(()=>{T.init()});const m=$(),h=b(!1),u=b("\u5168\u90E8"),d=k([]),x=k({_id:"",idx:0}),C=k(["\u5168\u90E8","\u672A\u4ED8\u6B3E","\u8A02\u55AE\u6210\u7ACB","\u8A02\u55AE\u53D6\u6D88"]),B=D(()=>u.value==="\u5168\u90E8"?d:u.value==="\u672A\u4ED8\u6B3E"?d.filter(o=>o.state===0):u.value==="\u8A02\u55AE\u6210\u7ACB"?d.filter(o=>o.state===1):d.filter(o=>o.state===2)),N=o=>{const l=d.findIndex(n=>n._id===o);x._id=d[l]._id,x.idx=l,h.value=!0};return(async()=>{try{const{data:o}=await F.get("/orders");d.push(...o.result.map(l=>(l.totalPrice=l.products.reduce((n,_)=>n+_.product.price*_.quantity,0),l)))}catch{q.fire({icon:"error",title:"\u5931\u6557",text:"\u7121\u6CD5\u53D6\u5F97\u8A02\u55AE"})}})(),(o,l)=>(c(),r("div",R,[s("div",G,[Q,t(p,{class:"mt-5"},{default:e(()=>[t(a,{cols:"12",md:"3"},{default:e(()=>[t(L,{modelValue:u.value,"onUpdate:modelValue":l[0]||(l[0]=n=>u.value=n),variant:"outlined",items:C,"append-inner-icon":"mdi-filter-menu-outline"},null,8,["modelValue","items"])]),_:1})]),_:1}),t(p,{class:"d-none d-lg-flex"},{default:e(()=>[t(a,{class:"text-h6"},{default:e(()=>[j]),_:1}),t(a,{class:"text-h6"},{default:e(()=>[z]),_:1}),t(a,{class:"text-h6"},{default:e(()=>[H]),_:1}),t(a,{class:"text-h6"},{default:e(()=>[J]),_:1}),t(a,{class:"text-h6"},{default:e(()=>[K]),_:1})]),_:1}),t(g,{class:"mb-10 d-none d-lg-block"}),s("div",W,[d.length>0?(c(!0),r(v,{key:0},w(f(B),n=>(c(),V(p,{key:n._id,class:"pt-3 pb-3 mt-10",style:{"border-left":"3px solid #FFEB3B"}},{default:e(()=>[t(a,{cols:"12",lg:"",class:"d-flex align-center"},{default:e(()=>[s("span",{class:"d-lg-none",onClick:_=>f(m).push("/order/"+n._id),style:{cursor:"pointer"}},"\u8A02\u55AE\u7DE8\u865F : ",8,X),s("span",{onClick:_=>f(m).push("/order/"+n._id),style:{cursor:"pointer"},class:"order_id"},i(n._id),9,Y)]),_:2},1024),t(a,{cols:"12",lg:"",class:"d-flex align-center"},{default:e(()=>[Z,s("span",null,i(new Date(n.date).toLocaleString()),1)]),_:2},1024),t(a,{cols:"12",md:"4",lg:"",class:"d-flex align-center"},{default:e(()=>[tt,n.state===0?(c(),r("span",et,"\u672A\u4ED8\u6B3E")):n.state===1?(c(),r("span",st,"\u8A02\u55AE\u6210\u7ACB")):(c(),r("span",nt,"\u8A02\u55AE\u53D6\u6D88"))]),_:2},1024),t(a,{cols:"12",md:"4",lg:"",class:"d-flex align-center"},{default:e(()=>[at,s("span",null,"NT. "+i(n.totalPrice),1)]),_:2},1024),t(a,{cols:"12",md:"4",lg:""},{default:e(()=>[lt,t(y,{icon:"",variant:"text",onClick:_=>N(n._id)},{default:e(()=>[t(M,{icon:"mdi-plus"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128)):(c(),r("h1",ot,"\u6C92\u6709\u8A02\u55AE\u54E6")),t(A,{modelValue:h.value,"onUpdate:modelValue":l[2]||(l[2]=n=>h.value=n)},{default:e(()=>[t(O,null,{default:e(()=>[t(P,null,{default:e(()=>[s("h3",dt,"~~~~~ \u8A02\u55AE\u7DE8\u865F :"+i(x._id)+" ~~~~~",1)]),_:1}),t(U,null,{default:e(()=>[t(p,{class:"d-none d-md-flex"},{default:e(()=>[t(a,{cols:"12",md:"5"},{default:e(()=>[ct]),_:1}),t(a,{cols:"12",md:"2"},{default:e(()=>[it]),_:1}),t(a,{cols:"12",md:"2"},{default:e(()=>[_t]),_:1}),t(a,{cols:"12",md:"3"},{default:e(()=>[rt]),_:1})]),_:1}),t(g,{class:"d-none d-md-block mb-1"}),(c(!0),r(v,null,w(d[x.idx].products,n=>(c(),V(p,{key:n._id},{default:e(()=>[t(a,{cols:"12",md:"5"},{default:e(()=>[s("span",{class:"d-none d-md-block text-brown",onClick:_=>f(m).push("/product/"+n.product._id),style:{cursor:"pointer"}},i(n.product.name),9,ut),s("span",{class:"d-md-none text-h6 text-brown",onClick:_=>f(m).push("/product/"+n.product._id),style:{cursor:"pointer"}},[s("b",null,i(n.product.name),1)],8,pt)]),_:2},1024),t(a,{cols:"4",md:"2"},{default:e(()=>[ft,s("span",mt,"NT. "+i(n.product.price),1)]),_:2},1024),t(a,{cols:"4",md:"2"},{default:e(()=>[ht,s("span",xt,i(n.quantity),1)]),_:2},1024),t(a,{cols:"4",md:"3"},{default:e(()=>[gt,s("span",kt,"NT. "+i(n.product.price*n.quantity),1)]),_:2},1024),t(g,{class:"d-md-none"})]),_:2},1024))),128)),t(g,{class:"d-none d-md-block"})]),_:1}),t(E,null,{default:e(()=>[t(y,{color:"brown",block:"",onClick:l[1]||(l[1]=n=>h.value=!1)},{default:e(()=>[bt]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])])]))}};export{yt as default};

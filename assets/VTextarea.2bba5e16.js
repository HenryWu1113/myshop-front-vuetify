import{i as K,aa as Q,ab as W,ac as X,u as Y,C as x,r as c,o as Z,$ as h,a0 as p,E as ee,ad as te,ae,af as le,d as a,ag as ne,J as y,F as P,ah as H,ai as oe,aj as ue,ak as re,al as se,am as ie,L as S,an as ce}from"./index.790d3547.js";const ve=K({name:"VTextarea",directives:{Intersect:Q},inheritAttrs:!1,props:{autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,hint:String,persistentHint:Boolean,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,...W(),...X()},emits:{"click:clear":e=>!0,"click:control":e=>!0,"update:modelValue":e=>!0},setup(e,_){let{attrs:V,emit:C,slots:u}=_;const l=Y(e,"modelValue"),N=x(()=>typeof e.counterValue=="function"?e.counterValue(l.value):(l.value||"").toString().length),$=x(()=>{if(V.maxlength)return V.maxlength;if(!(!e.counter||typeof e.counter!="number"&&typeof e.counter!="string"))return e.counter});function z(t,n){var o,r;!e.autofocus||!t||(o=n[0].target)==null||(r=o.focus)==null||r.call(o)}const T=c(),A=c(),s=c(!1),b=c("auto"),f=c(),R=x(()=>s.value||e.persistentPlaceholder),D=x(()=>e.messages.length?e.messages:R.value||e.persistentHint?e.hint:"");function w(){if(f.value!==document.activeElement){var t;(t=f.value)==null||t.focus()}s.value||(s.value=!0)}function G(t){w(),C("click:control",t)}function M(t){t.stopPropagation(),w(),S(()=>{l.value="",C("click:clear",t)})}function U(t){l.value=t.target.value}const i=c();function d(){!e.autoGrow||S(()=>{if(!i.value)return;const t=getComputedStyle(i.value),n=parseFloat(t.getPropertyValue("--v-field-padding-top"))+parseFloat(t.getPropertyValue("--v-field-padding-bottom")),o=i.value.scrollHeight,r=parseFloat(t.lineHeight),k=parseFloat(e.rows)*r+n,F=parseFloat(e.maxRows)*r+n||1/0;b.value=ce(Math.min(F,Math.max(k,o!=null?o:0)))})}Z(d),h(l,d),h(()=>e.rows,d),h(()=>e.maxRows,d);let m;return h(i,t=>{if(t)m=new ResizeObserver(d),m.observe(i.value);else{var n;(n=m)==null||n.disconnect()}}),p(()=>{var t;(t=m)==null||t.disconnect()}),ee(()=>{const t=!!(u.counter||e.counter||e.counterValue),n=!!(t||u.details),[o,r]=te(V),[{modelValue:k,...F}]=ae(e),[E]=le(e);return a(se,y({modelValue:l.value,"onUpdate:modelValue":v=>l.value=v,class:["v-textarea",{"v-textarea--prefixed":e.prefix,"v-textarea--suffixed":e.suffix,"v-textarea--auto-grow":e.autoGrow,"v-textarea--no-resize":e.noResize||e.autoGrow}]},o,F,{messages:D.value}),{...u,default:v=>{let{isDisabled:g,isDirty:I,isReadonly:j,isValid:J}=v;return a(ne,y({style:{"--v-input-control-height":b.value},"onClick:control":G,"onClick:clear":M,role:"textbox"},E,{active:R.value||I.value,dirty:I.value||e.dirty,focused:s.value,error:J.value===!1}),{...u,default:L=>{let{props:{class:B,...O}}=L;return a(P,null,[e.prefix&&a("span",{class:"v-text-field__prefix"},[e.prefix]),H(a("textarea",y({ref:f,class:B,value:l.value,onInput:U,autofocus:e.autofocus,readonly:j.value,disabled:g.value,placeholder:e.placeholder,rows:e.rows,name:e.name,onFocus:w,onBlur:()=>s.value=!1},O,r),null),[[oe("intersect"),{handler:z},null,{once:!0}]]),e.autoGrow&&H(a("textarea",{class:[B,"v-textarea__sizer"],"onUpdate:modelValue":q=>l.value=q,ref:i,readonly:!0,"aria-hidden":"true"},null),[[ue,l.value]]),e.suffix&&a("span",{class:"v-text-field__suffix"},[e.suffix])])}})},details:n?v=>{var g;return a(P,null,[(g=u.details)==null?void 0:g.call(u,v),t&&a(P,null,[a("span",null,null),a(re,{active:e.persistentCounter||s.value,value:N.value,max:$.value},u.counter)])])}:void 0})}),ie({},T,A,f)}});export{ve as V};
